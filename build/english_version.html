<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="description" content="Kodo Ishibashi is a shakuhachi player performing a fusion of traditional Japanese music and contemporary approaches. Concert and performance details available.">
    <meta name="keywords" content="Kodo Ishibashi, shakuhachi, shakuhachi performer, Japanese traditional music, concert, Kodo Ishibashi schedule">
    <meta name="author" content="Kodo Ishibashi">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Shakuhachi Player Kodo Ishibashi</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" rel="stylesheet">
    <!-- Add Firebase SDK -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/firebase/9.23.0/firebase-app-compat.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/firebase/9.23.0/firebase-firestore-compat.js"></script>
    <style>
        html {
            margin: 0;
            padding: 0;
            background-color: #F7EAD9;
        }
        
        body {
            font-family: 'Yu Mincho', serif;
            line-height: 1.8;
            margin: 0;
            padding: 0;
            color: #0b0b0b;
            display: flex;
            flex-direction: column;
            min-height: 100vh;
        }

        header {
            position: relative;
            color: #333;
            text-align: center;
            padding: 0;
            overflow: hidden;
            background-image: url('profile1.jpg');
            background-position: center;
            background-size: contain; 
            background-repeat: no-repeat;
            background-attachment: fixed;
            background-position: center top;
            background-attachment: fixed;
            height: 86vh;
            background-color: rgba(0, 0, 0, 0);
            opacity: 0;
            animation: fadeInBg 3s ease-in-out forwards;
            animation-delay: 0.5s;
        }

        @keyframes fadeInBg {
            0% { opacity: 0; }
            100% { opacity: 1; }
        }

        .leaf {
            position: absolute;
            width: 50px;
            height: auto;
            opacity: 0.8;
            will-change: transform, opacity;
            animation: fall 20s linear infinite;
            transform: translateZ(0);
            backface-visibility: hidden;
        }

        @keyframes fall {
            0% { transform: translate3d(0, -10vh, 0) rotate(0deg); opacity: 1; }
            100% { transform: translate3d(0, 190vh, 0) rotate(360deg); opacity: 0.8; }
        }

        .safari-iphone13mini .leaf {
            animation: fall-safari 35s linear infinite;
            opacity: 1 !important;
            transform: translate3d(0, 0, 0) !important;
        }

        @keyframes fall-safari {
            0% { transform: translate3d(0, -10vh, 0) rotate(0deg); opacity: 1; }
            50% { opacity: 0.9; }
            100% { transform: translate3d(0, 300vh, 0) rotate(180deg); opacity: 0.8; }
        }

        header.hidden {
            opacity: 0;
        }

        header::before {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
        }

        header h1 {
            margin: 0;
            font-size: 2.8rem;
            color: #fff;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.7);
            writing-mode: vertical-rl;
            position: absolute;
            right: 20%; 
            top: 30%;
            transform: translateY(0);
            font-size: 4rem;
        }

        header h1 span.name {
            font-size: 3rem;
            font-weight: bold;
            display: block;
        }

        header h1 span.title {
            font-size: 1.5rem;
        }

        header p{
            position: relative;
            z-index: 2;
        }
        
        header h1 {
            margin: 0;
            font-size: 2.8rem;
            color: #fff;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.7);
            writing-mode: vertical-rl;
            position: absolute;
            right: 20%;
            top: 10%;
            transform: translateY(0);
            font-size: 4rem;
        }

        header p {
            font-size: 1.1rem;
            color: #180614;
            margin-top: 100px;
        }

        header .profile {
            margin: 2rem 0 1.5rem;
            color: #fff;
            font-size: 1rem;
            line-height: 1.8;
            background: rgba(0, 0, 0, 0);
            padding: 1rem;
            border-radius: 10px;
            display: inline-block;
            max-width: 600px;
            text-align: left;
        }

        .menu {
            position: fixed;
            top: 20px;
            left: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-direction: column;
            width: 50px;
            height: 50px;
            background-color: #deb068;
            border-radius: 50%;
            cursor: pointer;
            z-index: 200;
        }

        .menu span {
            display: block;
            width: 50%;
            height: 2%;
            background-color: #555;
            margin: 5px 0;
            transition: transform 250ms ease;
            z-index: 200;
        }

        #menu {
            display: none;
        }

        #menu:checked ~ .menu {
            background-color: transparent;
        }

        #menu:checked ~ .nav {
            left: 0;
        }

        .nav {
            position: fixed;
            top: 0;
            left: -250px;
            width: 250px;
            height: 100%;
            background-color: #333;
            color: #ffffff;
            transition: left 0.3s ease;
            z-index: 100;
        }

        .nav ul {
            list-style: none;
            padding: 0;
            margin: 50px 0 0;
        }

        .nav ul li {
            margin: 0;
            padding: 15px;
            text-align: center;
        }

        .nav ul li a {
            text-decoration: none;
            color: #fff;
            font-size: 1.2rem;
            display: block;
        }

        .nav ul li a:hover {
            background-color: #444;
        }

        .language-toggle {
            position: fixed;
            top: 20px;
            right: 20px;
            display: flex;
            gap: 10px;
            z-index: 3;
        }

        .language-toggle-scrolled {
            position: absolute;
            top: calc(100vh + 20px);
            right: 20px;
        }

        .language-toggle button {
            background-color: #deb068;
            color: white;
            border: none;
            padding: 0.5rem 1rem;
            font-size: 0.9rem;
            cursor: pointer;
            border-radius: 5px;
        }

        .language-toggle button:hover {
            background-color: #ffdbac;
            color: #804000;
        }

        @keyframes fadeIn {
            0% {
                opacity: 0;
                transform: translateY(-10px);
            }
            100% {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .scroll-container {
            position: absolute;
            top: 92%;
            left: 50%;
            transform: translateX(-50%);
            z-index: 20;
        }

        .scroll-down {
            background-color: #F7EAD9;
            color: white;
            border: none;
            padding: 10px 20px;
            font-size: 1.8rem;
            border-radius: 5px;
            cursor: pointer;
            transition: background-color 0.8s;
        }

        .scroll-container:hover {
            z-index: 20;
        }

        .scroll-down:hover {
            background-color: #F7EAD9;
            color: #F7EAD9;
            z-index: 0;
        }

        @media (min-width: 480px) {
            .scroll-container {
                display: none;
            }
        }

        main {
            flex: 1;
            padding: 2rem;
            max-width: 100%;
            margin: 0 auto;
            background-color: #F7EAD9;
            background-size: 100% 100%;
            background-repeat: no-repeat;
            background-position: center top;
            background-attachment: fixed;
            margin-top: -30px;
            opacity: 0;
            transform: translateY(50px);
            transition: opacity 1s ease-out, transform 1s ease-out;
            z-index: -1;
        }

        main.visible {
            opacity: 1;
            transform: translateY(0);
        }

        section {
            margin-bottom: 3rem;
        }

        h2 {
            border-left: 4px solid #804000;
            padding-left: 0.5rem;
            color: #804000;
            margin-bottom: 1rem;
        }

        p {
            text-indent: 1em;
        }

        footer {
            height: auto; 
            min-height: 10px;
            padding: 1rem 0;
            font-size: 14px;
            background-color: #9DBDAE;
            color: #fff;
            text-align: center;
            bottom: 0;
            width: 100%;
            margin-top: auto;
        }

        footer a {
            color: #ffdbac;
            text-decoration: none;
            font-weight: bold;
        }

        footer a:hover {
            text-decoration: underline;
        }

        .event-detail {
            margin-top: 1rem;
            background-color: #f1f1f1;
            padding: 1rem;
            border-radius: 8px;
        }

        .event-image {
            width: 100%;
            max-width: 400px;
            height: auto;
            margin-bottom: 1rem;
            border-radius: 8px;
        }

        .loading {
            text-align: center;
            padding: 20px;
            color: #804000;
        }

        @media (max-width: 767px) {
            header h1 {
                font-size: 2rem;
                right: 20px;
                top: 10%;
                writing-mode: vertical-lr;
            }

            header p {
                font-size: 1rem;
                margin-top: 20px;
            }

            .menu {
                top: 10px;
                left: 10px;
            }

            .language-toggle {
                top: 10px;
                right: 10px;
            }

            header .profile {
                margin: 2rem 0 1.5rem;
                color: #fff;
                font-size: 0.7rem;
                line-height: 1.8;
                background: rgba(0, 0, 0, 0);
                padding: 1rem;
                border-radius: 10px;
                display: inline-block;
                max-width: 600px;
                text-align: left;
            }
        }

        @media (max-width: 500px) {
            header {
                position: relative;
                color: #333;
                text-align: center;
                padding: 0;
                overflow: hidden;
                background-image: url('profile1.jpg');
                background-position: center;
                background-size: contain;
                background-repeat: no-repeat;
                background-attachment: fixed;
                background-position: center top;
                background-attachment: fixed;
                height: 82vh;
                background-color: rgba(0, 0, 0, 0);
                opacity: 0;
                animation: fadeInBg 3s ease-in-out forwards;
                animation-delay: 0.5s;
            }

            @keyframes fadeInBg {
                0% { opacity: 0; }
                100% { opacity: 1; }
            }

            header h1 {
                font-size: 2rem;
                right: 20px;
                top: 10%;
                writing-mode: vertical-lr;
            }

            header p {
                font-size: 1rem;
                margin-top: 20px;
            }

            .menu {
                top: 10px;
                left: 10px;
            }

            .language-toggle {
                top: 10px;
                right: 10px;
            }

            header .profile {
                margin: 2rem 0 1.5rem;
                color: #fff;
                font-size: 0.7rem;
                line-height: 1.8;
                background: rgba(0, 0, 0, 0);
                padding: 1rem;
                border-radius: 10px;
                display: inline-block;
                max-width: 600px;
                text-align: left;
            }
        }
    </style>
</head>
<body>
    <header>
        <input type="checkbox" id="menu" />
        <label for="menu" class="menu">
            <span></span>
            <span></span>
            <span></span>
        </label>

        <nav class="nav">
            <ul>
                <li><a href="english_version.html">HOME</a></li>
                <li><a href="scheduleE.html">SCHEDULE</a></li>
                <li><a href="appearanceE.html">PAST APPEARANCE</a></li>
                <li><a href="contactE.html">CONTACT</a></li>
            </ul>
        </nav>
        
        <h1>
            <span class="name">Kodo Ishibashi</span>
            <span class="title">Shakuhachi Performer</span>
        </h1>
        
        <div class="language-toggle">
            <button onclick="setLanguage('ja')">JP</button>
        </div>
        <div class="scroll-container">
            <button class="scroll-down" onclick="scrollToMain()">↓</button>
        </div>
    </header>
    
    <div class="glow glow-lantern"></div>
    <img src="sakura2.png" class="leaf" style="top: -5%; left: 20%; animation-delay: 0s;">
    <img src="sakura5.png" class="leaf" style="top: -10%; left: 40%; animation-delay: 2s;">
    <img src="sakura4.png" class="leaf" style="top: -15%; left: 60%; animation-delay: 4s;">
    
    <main>
        <div id="loading-message" class="loading">Loading profile...</div>
        <div id="profile-content">
            <!-- Profile content will be loaded from Firebase -->
        </div>
    </main>
    
    <footer id="contact">
        <p>If you have any questions or performance requests, feel free to contact the following email or Instagram direct message:</p>
        <p><a href="mailto:kodo.bambooflute@gmail.com">kodo.bambooflute@gmail.com</a></p>
        <div class="social-icons">
            <a href="https://www.instagram.com/0425erikaaa/" target="_blank" aria-label="Instagram"><i class="fab fa-instagram"></i></a>
            <a href="https://m.facebook.com/ishibashikodo/" target="_blank" aria-label="Facebook"><i class="fab fa-facebook"></i></a>
        </div>
        <p>&copy; 2025 Shakuhachi Performer Kodo Ishibashi</p>
    </footer>

    <script>

if (performance.navigation.type === 1) { // Type 1 means navigation was a reload
            window.location.href = "https://webshaku.vercel.app";
        }
        // Initialize Firebase
        const firebaseConfig = {
            apiKey: "AIzaSyClcc3_N7WbmMICfexx_lQi_IGrkl8vWhY",
            authDomain: "shakuhachiweb-c6f85.firebaseapp.com",
            projectId: "shakuhachiweb-c6f85",
            storageBucket: "shakuhachiweb-c6f85.appspot.com",
            messagingSenderId: "536744242736",
            appId: "1:536744242736:web:2c95eb68d4cfd66a2a87f5",
            measurementId: "G-J9DCE1R7LT"
        };
        
        firebase.initializeApp(firebaseConfig);
        const db = firebase.firestore();

        // Load profile content from Firebase
        async function loadProfileContent() {
            const profileContent = document.getElementById('profile-content');
            const loadingMessage = document.getElementById('loading-message');
            
            try {
                const snapshot = await db.collection('content')
                    .where('type', '==', 'profile')
                    .where('language', '==', 'en')
                    .orderBy('order')
                    .get();
                
                loadingMessage.style.display = 'none';
                
                if (snapshot.empty) {
                    // Fallback to default content if no content in Firebase
                    profileContent.innerHTML = `
                        <p>Born in 2000 in Tokyo, Kodo began studying under Haruto Fujii after participating in a trial class held by the Setagaya Sankyoku Association at the age of 9.</p>
                        <p>After graduating from the Tokyo University of the Arts Music Affiliated High School and the Bachelor of Japanese Traditional Music (Shakuhachi). She enrolled to the Master's program at the same university and complete in April 2025.</p>
                        <p>During her studies, she has studied under master shakuhachi performer such as Reibo Aoki, Komei Takemura, Yosuke Kawase, Hozan Nomura, and Dozan Fujiwara.</p>
                        <p>She has received awards such as the "Ataka Prize," "Ryohei Miyata Prize," "Dousei Society Prize," and "Acanthus Music Award" during her undergraduate years.</p>
                        <p>She performed at the "2022 Music University Graduates Concert" held at the Imperial Palace's Tokagakudo.</p>
                        <p>In addition to classical works, she actively engages with pop music and contemporary Japanese music, expanding her repertoire.</p>
                        <p>Member of the Japanese Sankyoku Association, Kinko-style Association, Setagaya Sankyoku Association, and Dousei Society.</p>
                    `;
                    return;
                }
                
                let contentHtml = '';
                snapshot.forEach(doc => {
                    const data = doc.data();
                    contentHtml += `<p>${data.content}</p>`;
                });
                
                profileContent.innerHTML = contentHtml;
                
            } catch (error) {
                console.error("Error loading profile content:", error);
                loadingMessage.textContent = "Failed to load profile information.";
            }
        }

        function setLanguage(lang) {
            if (lang === 'en') {
                location.href = 'english_version.html';
            } else if (lang === 'ja') {
                location.href = 'main3.html';
            }
        }

        document.querySelectorAll('.nav a').forEach(function(link) {
            link.addEventListener('click', function() {
                document.getElementById('menu').checked = false;
            });
        });

        document.addEventListener("DOMContentLoaded", function () {
            loadProfileContent();
            
            const mainContent = document.querySelector("main");
            const headerHeight = document.querySelector("header").offsetHeight;
        
            window.addEventListener("scroll", function () {
                if (window.scrollY > headerHeight / 2) {
                    mainContent.classList.add("visible");
                }
            });
        });

        const header = document.querySelector('header');
        window.addEventListener('scroll', function() {
            if (window.scrollY > 100) {
                header.classList.add('hidden');
            } else {
                header.classList.remove('hidden');
            }
        });

        document.addEventListener("scroll", function () {
            const header = document.querySelector("header");
            const scrollY = window.scrollY;
            const fadeStart = 50;
            const fadeEnd = 300;
            let opacity = 1;
        
            if (scrollY > fadeStart) {
                opacity = Math.max(0, 1 - (scrollY - fadeStart) / (fadeEnd - fadeStart));
            }
        
            header.style.opacity = opacity;
        });

        const languageToggle = document.querySelector('.language-toggle');
        window.addEventListener('scroll', function() {
            if (window.scrollY > 600) {
                languageToggle.classList.add('language-toggle-scrolled');
            } else {
                languageToggle.classList.remove('language-toggle-scrolled');
            }
        });

        function detectSafariOnIPhone13Mini() {
            var ua = navigator.userAgent;
            var isSafari = /^((?!chrome|android).)*safari/i.test(ua);
            var isIPhone = /iPhone/i.test(ua);
            var isMini = window.screen.width === 375 && window.screen.height === 812;

            if (isSafari && isIPhone && isMini) {
                document.body.classList.add("safari-iphone13mini");
            }
        }

        detectSafariOnIPhone13Mini();

        function scrollToMain() {
            const main = document.querySelector('main');
            const targetPosition = main.getBoundingClientRect().top + window.scrollY;
            const startPosition = window.scrollY;
            const distance = targetPosition - startPosition;
            const duration = 1000;
            let startTime = null;

            function animation(currentTime) {
                if (startTime === null) startTime = currentTime;
                const timeElapsed = currentTime - startTime;
                const progress = Math.min(timeElapsed / duration, 1);
                const ease = progress < 0.5 ? 2 * progress * progress : -1 + (4 - 2 * progress) * progress;
                window.scrollTo(0, startPosition + distance * ease);

                if (timeElapsed < duration) {
                    requestAnimationFrame(animation);
                }
            }

            requestAnimationFrame(animation);
        }
    </script>
</body>
</html>
